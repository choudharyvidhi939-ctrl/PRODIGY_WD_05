<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Weather App — Global</title>

  <style>
    :root{
      --bg-a:#6a7f98;
      --bg-b:#4b5563;
      --card: rgba(255,255,255,0.06);
      --accent: #8b5cf6;
      --glass-shadow: 0 8px 30px rgba(11,15,22,0.45);
    }

    *{box-sizing:border-box}
    body {
      margin: 0;
      font-family: Poppins, sans-serif;
      background: linear-gradient(135deg, var(--bg-a), var(--bg-b));
      color: #ecf0f3;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 24px;
    }

    .container {
      width: 100%;
      max-width: 720px;
      background: var(--card);
      padding: 26px;
      border-radius: 18px;
      box-shadow: var(--glass-shadow);
      backdrop-filter: blur(8px) saturate(1.2);
      display: grid;
      grid-template-columns: 1fr 340px;
      gap: 20px;
    }

    header{ grid-column: 1 / -1; display:flex; justify-content:space-between }
    h1{ margin:0; font-size:20px }
    .sub{ opacity:0.8; font-size:13px }

    input[type=text]{
      width:100%;
      padding:12px 14px;
      border-radius:999px;
      border:none;
      background:rgba(255,255,255,0.03);
      color:white;
    }

    button.btn{
      padding:10px 14px;
      border-radius:12px;
      border:none;
      background: linear-gradient(180deg,var(--accent), #6d28d9);
      color:white;
      cursor:pointer;
      font-weight:600;
    }

    .weather-icon{ width:120px; margin:0 auto 6px }
    .temp{ font-size:44px; margin:10px 0 }
    .desc{ text-transform:capitalize }

    .meta{ display:flex; justify-content:space-between; margin-top:14px }
    .meta div{ flex:1; text-align:center; font-size:13px }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <div>
        <h1>Weather — Global</h1>
        <div class="sub">Search any city or use GPS</div>
      </div>
    </header>

    <section class="left">
      <div class="controls" style="display:flex; gap:10px;">
        <input id="locationInput" type="text" placeholder="Search city..." />
        <button class="btn" id="searchBtn">Search</button>
        <button class="btn" id="locBtn">Use my location</button>
      </div>

      <div id="resultText" style="margin-top:12px;font-size:13px;"></div>
      <div id="loading" style="margin-top:5px; display:none;">Loading…</div>
    </section>

    <aside class="right">
      <div class="card" style="text-align:center;">
        <img id="iconImg" class="weather-icon" src="https://openweathermap.org/img/wn/01d@2x.png" />
        <div id="place">—</div>
        <div id="temp" class="temp">—°C</div>
        <div id="desc" class="desc">—</div>

        <div class="meta">
          <div id="humidity">Humidity<br><strong>—%</strong></div>
          <div id="wind">Wind<br><strong>— m/s</strong></div>
          <div id="pressure">Pressure<br><strong>— hPa</strong></div>
        </div>
      </div>
    </aside>
  </div>

  <script>
    const apiKey = "dd0a315afbfc024d2558e45014cac560";

    const input = document.getElementById("locationInput");
    const searchBtn = document.getElementById("searchBtn");
    const locBtn = document.getElementById("locBtn");
    const loadingEl = document.getElementById("loading");
    const resultText = document.getElementById("resultText");

    const iconImg = document.getElementById("iconImg");
    const placeEl = document.getElementById("place");
    const tempEl = document.getElementById("temp");
    const descEl = document.getElementById("desc");
    const humEl = document.getElementById("humidity");
    const windEl = document.getElementById("wind");
    const presEl = document.getElementById("pressure");

    function showLoading(v) {
      loadingEl.style.display = v ? "block" : "none";
    }

    function displayWeather(data) {
      iconImg.src = `https://openweathermap.org/img/wn/${data.weather[0].icon}@4x.png`;
      placeEl.textContent = `${data.name}, ${data.sys.country}`;
      tempEl.textContent = Math.round(data.main.temp) + "°C";
      descEl.textContent = data.weather[0].description;

      humEl.innerHTML = `Humidity<br><strong>${data.main.humidity}%</strong>`;
      windEl.innerHTML = `Wind<br><strong>${data.wind.speed} m/s</strong>`;
      presEl.innerHTML = `Pressure<br><strong>${data.main.pressure} hPa</strong>`;
    }

    async function fetchWeather(url){
      try{
        showLoading(true);
        const res = await fetch(url);
        const data = await res.json();
        showLoading(false);

        if (data.cod != 200){
          resultText.textContent = "Error: " + data.message;
          return;
        }

        displayWeather(data);
        resultText.textContent = "Updated: " + new Date().toLocaleString();

      } catch (err){
        showLoading(false);
        resultText.textContent = "Network error.";
      }
    }

    function getWeatherByInput(){
      const city = input.value.trim();
      if(!city){ alert("Enter a city"); return; }

      const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;
      fetchWeather(url);
    }

    function getWeatherByLocation(){
      resultText.textContent = "Detecting your location…";

      navigator.geolocation.getCurrentPosition(pos=>{
        const lat = pos.coords.latitude;
        const lon = pos.coords.longitude;

        const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;
        fetchWeather(url);

      }, ()=> alert("Location permission denied."));
    }

    searchBtn.addEventListener("click", getWeatherByInput);
    input.addEventListener("keydown", (e)=>{ if(e.key==="Enter") getWeatherByInput(); });
    locBtn.addEventListener("click", getWeatherByLocation);

  </script>

</body>
</html>
